{"version":3,"sources":["webpack:///./src/components/SimpleHeader.vue","webpack:///./src/components/SimpleHeader.vue?aeba","webpack:///./src/components/SimpleHeader.vue?6cc5","webpack:///./src/views/OrderDetail.vue?1f6d","webpack:///./src/service/order.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/OrderDetail.vue","webpack:///./src/views/OrderDetail.vue?1dad"],"names":["class","isback","goBack","name","props","type","String","default","back","noback","Boolean","emits","setup","ctx","router","push","path","go","emit","render","__scopeId","createOrder","params","axios","post","getOrderList","get","getOrderDetail","id","cancelOrder","put","confirmOrder","payOrder","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","call","this","match","error","style","close","detail","orderStatusString","orderNo","createTime","orderStatus","color","block","handleConfirmOrder","showPayFn","handleCancelOrder","totalPrice","newBeeMallOrderItemVOS","item","key","goodsId","num","goodsCount","price","sellingPrice","desc","title","goodsName","thumb","$filters","prefix","goodsCoverImg","show","showPay","position","handlePayOrder","components","sHeader","route","state","init","loading","message","forbidClick","query","data","clear","confirm","then","res","resultCode","catch","payType"],"mappings":"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","file":"js/order-detail.4b9ea10c.js","sourcesContent":["<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <header class=\"simple-header van-hairline--bottom\">\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\n    <div class=\"simple-header-name\">{{ name }}</div>\n    <i class=\"nbicon nbmore\"></i>\n  </header>\n  <div class=\"block\" />\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: ''\n    },\n    back: {\n      type: String,\n      default: ''\n    },\n    noback: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['callback'],\n  setup(props, ctx) {\n    const isback = ref(props.noback)\n    const router = useRouter()\n    const goBack = () => {\n      if (!props.back) {\n        router.go(-1)\n      } else {\n        router.push({ path: props.back })\n      }\n      ctx.emit('callback')\n    }\n    return {\n      goBack,\n      isback\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .simple-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n    .fj();\n    .wh(100%, 44px);\n    line-height: 44px;\n    padding: 0 10px;\n    .boxSizing();\n    color: #252525;\n    background: #fff;\n    .simple-header-name {\n      font-size: 14px;\n    }\n  }\n  .block {\n    height: 44px;\n  }\n</style>\n","import { render } from \"./SimpleHeader.vue?vue&type=template&id=2adef164&scoped=true&bindings={\\\"name\\\":\\\"props\\\",\\\"back\\\":\\\"props\\\",\\\"noback\\\":\\\"props\\\",\\\"goBack\\\":\\\"setup\\\",\\\"isback\\\":\\\"setup\\\"}\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=2adef164&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2adef164\"\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SimpleHeader.vue?vue&type=style&index=0&id=2adef164&lang=less&scoped=true\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SimpleHeader.vue?vue&type=style&index=0&id=2adef164&lang=less&scoped=true\"","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OrderDetail.vue?vue&type=style&index=0&id=4a79ced6&lang=less&scoped=true\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./OrderDetail.vue?vue&type=style&index=0&id=4a79ced6&lang=less&scoped=true\"","/**\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n */\n\nimport axios from '../utils/axios'\n\nexport function createOrder(params) {\n  return axios.post('api/saveOrder', params);\n}\n\nexport function getOrderList(params) {\n  return axios.get('api/order', { params });\n}\n\nexport function getOrderDetail(id) {\n  return axios.get(`api/order/${id}`);\n}\n\nexport function cancelOrder(id) {\n  return axios.put(`api/order/${id}/cancel`);\n}\n\nexport function confirmOrder(id) {\n  return axios.put(`api/order/${id}/finish`)\n}\n\nexport function payOrder(params) {\n  return axios.get('api/paySuccess', { params })\n}\n\n\n\n\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"order-detail-box\">\n    <s-header :name=\"'订单详情'\" @callback=\"close\"></s-header>\n    <div class=\"order-status\">\n      <div class=\"status-item\">\n        <label>订单状态：</label>\n        <span>{{ detail.orderStatusString }}</span>\n      </div>\n      <div class=\"status-item\">\n        <label>订单编号：</label>\n        <span>{{ detail.orderNo }}</span>\n      </div>\n      <div class=\"status-item\">\n        <label>下单时间：</label>\n        <span>{{ detail.createTime }}</span>\n      </div>\n      <van-button v-if=\"detail.orderStatus == 3\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block @click=\"handleConfirmOrder(detail.orderNo)\">确认收货</van-button>\n      <van-button v-if=\"detail.orderStatus == 0\" style=\"margin-bottom: 10px\" color=\"#1baeae\" block @click=\"showPayFn\">去支付</van-button>\n      <van-button v-if=\"!(detail.orderStatus < 0 || detail.orderStatus == 4)\" block @click=\"handleCancelOrder(detail.orderNo)\">取消订单</van-button>\n    </div>\n    <div class=\"order-price\">\n      <div class=\"price-item\">\n        <label>商品金额：</label>\n        <span>¥ {{ detail.totalPrice }}</span>\n      </div>\n      <div class=\"price-item\">\n        <label>配送方式：</label>\n        <span>普通快递</span>\n      </div>\n    </div>\n    <van-card\n      v-for=\"item in detail.newBeeMallOrderItemVOS\"\n      :key=\"item.goodsId\"\n      style=\"background: #fff\"\n      :num=\"item.goodsCount\"\n      :price=\"item.sellingPrice\"\n      desc=\"全场包邮\"\n      :title=\"item.goodsName\"\n      :thumb=\"$filters.prefix(item.goodsCoverImg)\"\n    />\n    <van-popup\n      v-model:show=\"showPay\"\n      position=\"bottom\"\n      :style=\"{ height: '24%' }\"\n    >\n      <div :style=\"{ width: '90%', margin: '0 auto', padding: '20px 0' }\">\n        <van-button :style=\"{ marginBottom: '10px' }\" color=\"#1989fa\" block @click=\"handlePayOrder(detail.orderNo, 1)\">支付宝支付</van-button>\n        <van-button color=\"#4fc08d\" block @click=\"handlePayOrder(detail.orderNo, 2)\">微信支付</van-button>\n      </div>\n    </van-popup>\n  </div>\n</template>\n\n<script>\nimport { reactive, toRefs, onMounted } from 'vue'\nimport sHeader from '@/components/SimpleHeader'\nimport { getOrderDetail, cancelOrder, confirmOrder, payOrder } from '@/service/order'\nimport { Dialog, Toast } from 'vant'\nimport { useRoute } from 'vue-router'\nexport default {\n  name: 'OrderDetail',\n  components: {\n    sHeader\n  },\n  setup() {\n    const route = useRoute()\n    const state = reactive({\n      detail: {},\n      showPay: false\n    })\n\n    onMounted(() => {\n      init()\n    })\n\n    const init = async () => {\n      Toast.loading({\n        message: '加载中...',\n        forbidClick: true\n      });\n      const { id } = route.query\n      const { data } = await getOrderDetail(id)\n      state.detail = data\n      Toast.clear()\n    }\n\n    const handleCancelOrder = (id) => {\n      Dialog.confirm({\n        title: '确认取消订单？',\n      }).then(() => {\n        cancelOrder(id).then(res => {\n          if (res.resultCode == 200) {\n            Toast('删除成功')\n            init()\n          }\n        })\n      }).catch(() => {\n        // on cancel\n      });\n    }\n\n    const handleConfirmOrder = (id) => {\n      Dialog.confirm({\n        title: '是否确认订单？',\n      }).then(() => {\n        confirmOrder(id).then(res => {\n          if (res.resultCode == 200) {\n            Toast('确认成功')\n            init()\n          }\n        })\n      }).catch(() => {\n        // on cancel\n      });\n    }\n\n    const showPayFn = () => {\n      state.showPay = true\n    }\n\n    const handlePayOrder = async (id, type) => {\n      Toast.loading\n      await payOrder({ orderNo: id, payType: type })\n      state.showPay = false\n      init()\n    }\n\n    const close = () => {\n      Dialog.close()\n    }\n\n    return {\n      ...toRefs(state),\n      handleCancelOrder,\n      handleConfirmOrder,\n      showPayFn,\n      handlePayOrder,\n      close\n    }\n\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  .order-detail-box {\n    background: #f7f7f7;\n    .order-status {\n      background: #fff;\n      padding: 20px;\n      font-size: 15px;\n      .status-item {\n        margin-bottom: 10px;\n        label {\n          color: #999;\n        }\n        span {\n\n        }\n      }\n    }\n    .order-price {\n      background: #fff;\n      margin: 20px 0;\n      padding: 20px;\n      font-size: 15px;\n      .price-item {\n        margin-bottom: 10px;\n        label {\n          color: #999;\n        }\n        span {\n\n        }\n      }\n    }\n    .van-card {\n      margin-top: 0;\n    }\n    .van-card__content {\n      display: flex;\n      flex-direction: column;\n      justify-content: center;\n    }\n  }\n</style>\n","import { render } from \"./OrderDetail.vue?vue&type=template&id=4a79ced6&scoped=true&bindings={\\\"handleCancelOrder\\\":\\\"setup\\\",\\\"handleConfirmOrder\\\":\\\"setup\\\",\\\"showPayFn\\\":\\\"setup\\\",\\\"handlePayOrder\\\":\\\"setup\\\",\\\"close\\\":\\\"setup\\\"}\"\nimport script from \"./OrderDetail.vue?vue&type=script&lang=js\"\nexport * from \"./OrderDetail.vue?vue&type=script&lang=js\"\n\nimport \"./OrderDetail.vue?vue&type=style&index=0&id=4a79ced6&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-4a79ced6\"\n\nexport default script"],"sourceRoot":""}