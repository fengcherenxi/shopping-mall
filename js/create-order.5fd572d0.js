(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create-order"],{"05f1":function(e,t,n){"use strict";n("4e38")},"0eaf":function(e,t,n){"use strict";n("b0c0");var r=n("7a23"),a=Object(r["U"])("data-v-2adef164");Object(r["C"])("data-v-2adef164");var c={class:"simple-header van-hairline--bottom"},o={key:1},s={class:"simple-header-name"},i=Object(r["j"])("i",{class:"nbicon nbmore"},null,-1),u=Object(r["j"])("div",{class:"block"},null,-1);Object(r["A"])();var d=a((function(e,t,n,a,d,b){return Object(r["z"])(),Object(r["f"])(r["a"],null,[Object(r["j"])("header",c,[a.isback?(Object(r["z"])(),Object(r["f"])("i",o,"      ")):(Object(r["z"])(),Object(r["f"])("i",{key:0,class:"nbicon nbfanhui",onClick:t[1]||(t[1]=function(){return a.goBack.apply(a,arguments)})})),Object(r["j"])("div",s,Object(r["L"])(n.name),1),i]),u],64)})),b=n("6c02"),l={props:{name:{type:String,default:""},back:{type:String,default:""},noback:{type:Boolean,default:!1}},emits:["callback"],setup:function(e,t){var n=Object(r["E"])(e.noback),a=Object(b["d"])(),c=function(){e.back?a.push({path:e.back}):a.go(-1),t.emit("callback")};return{goBack:c,isback:n}}};n("122a");l.render=d,l.__scopeId="data-v-2adef164";t["a"]=l},"122a":function(e,t,n){"use strict";n("89b7")},"3f49":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"d",(function(){return u}));var r=n("a27e");function a(e){return r["a"].post("api/address",e)}function c(e){return r["a"].put("api/address",e)}function o(e){return r["a"].delete("api/address/".concat(e))}function s(){return r["a"].get("api/address/default")}function i(){return r["a"].get("api/address",{pageNumber:1,pageSize:1e3})}function u(e){return r["a"].get("api/address/".concat(e))}},"4e38":function(e,t,n){},"4fa1":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),a=Object(r["U"])("data-v-dd95502e");Object(r["C"])("data-v-dd95502e");var c={class:"create-order"},o={class:"address-wrap"},s={class:"address"},i={class:"good"},u={class:"good-img"},d={class:"good-desc"},b={class:"good-title"},l={class:"good-btn"},f={class:"price"},j={class:"pay-wrap"},p={class:"price"},O=Object(r["j"])("span",null,"商品金额",-1),m=Object(r["i"])("生成订单"),v={style:{width:"90%",margin:"0 auto",padding:"50px 0"}},g=Object(r["i"])("支付宝支付"),h=Object(r["i"])("微信支付");Object(r["A"])();var y=a((function(e,t,n,y,k,I){var w=Object(r["H"])("s-header"),C=Object(r["H"])("van-icon"),L=Object(r["H"])("van-button"),x=Object(r["H"])("van-popup");return Object(r["z"])(),Object(r["f"])("div",c,[Object(r["j"])(w,{name:"生成订单",onCallback:y.deleteLocal},null,8,["onCallback"]),Object(r["j"])("div",o,[Object(r["j"])("div",{class:"name",onClick:t[1]||(t[1]=function(){return y.goTo.apply(y,arguments)})},[Object(r["j"])("span",null,Object(r["L"])(e.address.userName),1),Object(r["j"])("span",null,Object(r["L"])(e.address.userPhone),1)]),Object(r["j"])("div",s,Object(r["L"])(e.address.provinceName)+" "+Object(r["L"])(e.address.cityName)+" "+Object(r["L"])(e.address.regionName)+" "+Object(r["L"])(e.address.detailAddress),1),Object(r["j"])(C,{class:"arrow",name:"arrow"})]),Object(r["j"])("div",i,[(Object(r["z"])(!0),Object(r["f"])(r["a"],null,Object(r["F"])(e.cartList,(function(t,n){return Object(r["z"])(),Object(r["f"])("div",{class:"good-item",key:n},[Object(r["j"])("div",u,[Object(r["j"])("img",{src:e.$filters.prefix(t.goodsCoverImg),alt:""},null,8,["src"])]),Object(r["j"])("div",d,[Object(r["j"])("div",b,[Object(r["j"])("span",null,Object(r["L"])(t.goodsName),1),Object(r["j"])("span",null,"x"+Object(r["L"])(t.goodsCount),1)]),Object(r["j"])("div",l,[Object(r["j"])("div",f,"¥"+Object(r["L"])(t.sellingPrice),1)])])])})),128))]),Object(r["j"])("div",j,[Object(r["j"])("div",p,[O,Object(r["j"])("span",null,"¥"+Object(r["L"])(y.total),1)]),Object(r["j"])(L,{onClick:y.handleCreateOrder,class:"pay-btn",color:"#1baeae",type:"primary",block:""},{default:a((function(){return[m]})),_:1},8,["onClick"])]),Object(r["j"])(x,{closeable:"","close-on-click-overlay":!1,show:e.showPay,"onUpdate:show":t[4]||(t[4]=function(t){return e.showPay=t}),position:"bottom",style:{height:"30%"},onClose:y.close},{default:a((function(){return[Object(r["j"])("div",v,[Object(r["j"])(L,{style:{marginBottom:"10px"},color:"#1989fa",block:"",onClick:t[2]||(t[2]=function(e){return y.handlePayOrder(1)})},{default:a((function(){return[g]})),_:1}),Object(r["j"])(L,{color:"#4fc08d",block:"",onClick:t[3]||(t[3]=function(e){return y.handlePayOrder(2)})},{default:a((function(){return[h]})),_:1})])]})),_:1},8,["show","onClose"])])})),k=(n("4160"),n("a15b"),n("d81d"),n("159b"),n("5530")),I=(n("e7e5"),n("d399")),w=(n("96cf"),n("1da1")),C=n("0eaf"),L=n("8ee6"),x=n("3f49"),N=n("99c5"),P=n("495f"),S=n("6c02"),_={components:{sHeader:C["a"]},setup:function(){var e=Object(S["d"])(),t=Object(S["c"])(),n=Object(r["D"])({cartList:[],address:{},showPay:!1,orderNo:"",cartItemIds:[]});Object(r["w"])((function(){a()}));var a=function(){var r=Object(w["a"])(regeneratorRuntime.mark((function r(){var a,c,o,s,i,u,d,b;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return I["a"].loading({message:"加载中...",forbidClick:!0}),a=t.query,c=a.addressId,o=a.cartItemIds,s=o?JSON.parse(o):JSON.parse(Object(P["a"])("cartItemIds")),console.log("cartItemIds",o),Object(P["c"])("cartItemIds",JSON.stringify(s)),r.next=7,Object(L["c"])({cartItemIds:s.join(",")});case 7:if(i=r.sent,u=i.data,!c){r.next=15;break}return r.next=12,Object(x["d"])(c);case 12:r.t0=r.sent,r.next=18;break;case 15:return r.next=17,Object(x["f"])();case 17:r.t0=r.sent;case 18:if(d=r.t0,b=d.data,b){r.next=23;break}return e.push({path:"/address"}),r.abrupt("return");case 23:n.cartList=u,n.address=b,I["a"].clear();case 26:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),c=function(){e.push({path:"/address",query:{cartItemIds:JSON.stringify(n.cartItemIds),from:"create-order"}})},o=function(){Object(P["c"])("cartItemIds","")},s=function(){var e=Object(w["a"])(regeneratorRuntime.mark((function e(){var t,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={addressId:n.address.addressId,cartItemIds:n.cartList.map((function(e){return e.cartItemId}))},e.next=3,Object(N["c"])(t);case 3:r=e.sent,a=r.data,Object(P["c"])("cartItemIds",""),n.orderNo=a,n.showPay=!0;case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),i=function(){e.push({path:"/order"})},u=function(){var t=Object(w["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(N["f"])({orderNo:n.orderNo,payType:r});case 2:I["a"].success("支付成功"),setTimeout((function(){e.push({path:"/order"})}),2e3);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=Object(r["d"])((function(){var e=0;return n.cartList.forEach((function(t){e+=t.goodsCount*t.sellingPrice})),e}));return Object(k["a"])(Object(k["a"])({},Object(r["M"])(n)),{},{goTo:c,deleteLocal:o,handleCreateOrder:s,close:i,handlePayOrder:u,total:d})}};n("05f1");_.render=y,_.__scopeId="data-v-dd95502e";t["default"]=_},"89b7":function(e,t,n){},"99c5":function(e,t,n){"use strict";n.d(t,"c",(function(){return a})),n.d(t,"e",(function(){return c})),n.d(t,"d",(function(){return o})),n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return i})),n.d(t,"f",(function(){return u}));var r=n("a27e");function a(e){return r["a"].post("api/saveOrder",e)}function c(e){return r["a"].get("api/order",{params:e})}function o(e){return r["a"].get("api/order/".concat(e))}function s(e){return r["a"].put("api/order/".concat(e,"/cancel"))}function i(e){return r["a"].put("api/order/".concat(e,"/finish"))}function u(e){return r["a"].get("api/paySuccess",{params:e})}},a15b:function(e,t,n){"use strict";var r=n("23e7"),a=n("44ad"),c=n("fc6a"),o=n("a640"),s=[].join,i=a!=Object,u=o("join",",");r({target:"Array",proto:!0,forced:i||!u},{join:function(e){return s.call(c(this),void 0===e?",":e)}})},b0c0:function(e,t,n){var r=n("83ab"),a=n("9bf2").f,c=Function.prototype,o=c.toString,s=/^\s*function ([^ (]*)/,i="name";r&&!(i in c)&&a(c,i,{configurable:!0,get:function(){try{return o.call(this).match(s)[1]}catch(e){return""}}})},d81d:function(e,t,n){"use strict";var r=n("23e7"),a=n("b727").map,c=n("1dde"),o=n("ae40"),s=c("map"),i=o("map");r({target:"Array",proto:!0,forced:!s||!i},{map:function(e){return a(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=create-order.5fd572d0.js.map