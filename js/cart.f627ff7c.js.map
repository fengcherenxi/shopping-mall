{"version":3,"sources":["webpack:///./src/components/NavBar.vue?c81a","webpack:///./src/components/SimpleHeader.vue","webpack:///./src/components/SimpleHeader.vue?aeba","webpack:///./src/components/SimpleHeader.vue?6cc5","webpack:///./node_modules/core-js/modules/es.string.includes.js","webpack:///./node_modules/core-js/modules/es.function.name.js","webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?7a75","webpack:///./node_modules/core-js/modules/es.array.includes.js","webpack:///./src/components/NavBar.vue","webpack:///./src/components/NavBar.vue?ab0f","webpack:///./node_modules/core-js/modules/es.array.map.js","webpack:///./src/views/Cart.vue?c12d"],"names":["class","isback","goBack","name","props","type","String","default","back","noback","Boolean","emits","setup","ctx","router","push","path","go","emit","render","__scopeId","$","notARegExp","requireObjectCoercible","correctIsRegExpLogic","target","proto","forced","includes","searchString","this","indexOf","arguments","length","undefined","DESCRIPTORS","defineProperty","f","FunctionPrototype","Function","prototype","FunctionPrototypeToString","toString","nameRE","NAME","configurable","get","call","match","error","src","alt","groupChange","result","ref","list","item","index","right-width","key","right","square","icon","deleteGood","cartItemId","$filters","prefix","goodsCoverImg","goodsName","goodsCount","sellingPrice","integer","min","max","model-value","async-change","onChange","price","total","button-text","onSubmit","allCheck","checked","checkAll","round","color","goTo","block","components","navBar","sHeader","store","state","all","init","loading","message","forbidClick","pageNumber","data","map","clear","sum","_list","filter","forEach","value","detail","fail","params","JSON","stringify","query","cartItemIds","id","dispatch","console","log","$includes","addToUnscopables","arrayMethodUsesToLength","USES_TO_LENGTH","ACCESSORS","1","el","to","badge","count","route","token","cartCount","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","callbackfn"],"mappings":"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","file":"js/cart.f627ff7c.js","sourcesContent":["export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NavBar.vue?vue&type=style&index=0&id=ce4468ce&lang=less&scoped=true\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./NavBar.vue?vue&type=style&index=0&id=ce4468ce&lang=less&scoped=true\"","<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <header class=\"simple-header van-hairline--bottom\">\n    <i v-if=\"!isback\" class=\"nbicon nbfanhui\" @click=\"goBack\"></i>\n    <i v-else>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</i>\n    <div class=\"simple-header-name\">{{ name }}</div>\n    <i class=\"nbicon nbmore\"></i>\n  </header>\n  <div class=\"block\" />\n</template>\n\n<script>\nimport { ref } from 'vue'\nimport { useRouter } from 'vue-router'\nexport default {\n  props: {\n    name: {\n      type: String,\n      default: ''\n    },\n    back: {\n      type: String,\n      default: ''\n    },\n    noback: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['callback'],\n  setup(props, ctx) {\n    const isback = ref(props.noback)\n    const router = useRouter()\n    const goBack = () => {\n      if (!props.back) {\n        router.go(-1)\n      } else {\n        router.push({ path: props.back })\n      }\n      ctx.emit('callback')\n    }\n    return {\n      goBack,\n      isback\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n  @import '../common/style/mixin';\n  .simple-header {\n    position: fixed;\n    top: 0;\n    left: 0;\n    z-index: 10000;\n    .fj();\n    .wh(100%, 44px);\n    line-height: 44px;\n    padding: 0 10px;\n    .boxSizing();\n    color: #252525;\n    background: #fff;\n    .simple-header-name {\n      font-size: 14px;\n    }\n  }\n  .block {\n    height: 44px;\n  }\n</style>\n","import { render } from \"./SimpleHeader.vue?vue&type=template&id=2adef164&scoped=true&bindings={\\\"name\\\":\\\"props\\\",\\\"back\\\":\\\"props\\\",\\\"noback\\\":\\\"props\\\",\\\"goBack\\\":\\\"setup\\\",\\\"isback\\\":\\\"setup\\\"}\"\nimport script from \"./SimpleHeader.vue?vue&type=script&lang=js\"\nexport * from \"./SimpleHeader.vue?vue&type=script&lang=js\"\n\nimport \"./SimpleHeader.vue?vue&type=style&index=0&id=2adef164&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-2adef164\"\n\nexport default script","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SimpleHeader.vue?vue&type=style&index=0&id=2adef164&lang=less&scoped=true\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./SimpleHeader.vue?vue&type=style&index=0&id=2adef164&lang=less&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar notARegExp = require('../internals/not-a-regexp');\nvar requireObjectCoercible = require('../internals/require-object-coercible');\nvar correctIsRegExpLogic = require('../internals/correct-is-regexp-logic');\n\n// `String.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-string.prototype.includes\n$({ target: 'String', proto: true, forced: !correctIsRegExpLogic('includes') }, {\n  includes: function includes(searchString /* , position = 0 */) {\n    return !!~String(requireObjectCoercible(this))\n      .indexOf(notARegExp(searchString), arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","var DESCRIPTORS = require('../internals/descriptors');\nvar defineProperty = require('../internals/object-define-property').f;\n\nvar FunctionPrototype = Function.prototype;\nvar FunctionPrototypeToString = FunctionPrototype.toString;\nvar nameRE = /^\\s*function ([^ (]*)/;\nvar NAME = 'name';\n\n// Function instances `.name` property\n// https://tc39.github.io/ecma262/#sec-function-instances-name\nif (DESCRIPTORS && !(NAME in FunctionPrototype)) {\n  defineProperty(FunctionPrototype, NAME, {\n    configurable: true,\n    get: function () {\n      try {\n        return FunctionPrototypeToString.call(this).match(nameRE)[1];\n      } catch (error) {\n        return '';\n      }\n    }\n  });\n}\n","<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"cart-box\">\n    <s-header :name=\"'购物车'\" :noback=\"true\"></s-header>\n    <div class=\"cart-body\">\n      <van-checkbox-group @change=\"groupChange\" v-model=\"result\" ref=\"checkboxGroup\">\n        <van-swipe-cell :right-width=\"50\" v-for=\"(item, index) in list\" :key=\"index\">\n          <div class=\"good-item\">\n            <van-checkbox :name=\"item.cartItemId\" />\n            <div class=\"good-img\"><img :src=\"$filters.prefix(item.goodsCoverImg)\" alt=\"\"></div>\n            <div class=\"good-desc\">\n              <div class=\"good-title\">\n                <span>{{ item.goodsName }}</span>\n                <span>x{{ item.goodsCount }}</span>\n              </div>\n              <div class=\"good-btn\">\n                <div class=\"price\">¥{{ item.sellingPrice }}</div>\n                <van-stepper\n                  integer\n                  :min=\"1\"\n                  :max=\"5\"\n                  :model-value=\"item.goodsCount\"\n                  :name=\"item.cartItemId\"\n                  async-change\n                  @change=\"onChange\"\n                />\n              </div>\n            </div>\n          </div>\n          <template #right>\n            <van-button\n              square\n              icon=\"delete\"\n              type=\"danger\"\n              class=\"delete-button\"\n              @click=\"deleteGood(item.cartItemId)\"\n            />\n          </template>\n        </van-swipe-cell>\n      </van-checkbox-group>\n    </div>\n    <van-submit-bar\n      v-if=\"list.length > 0\"\n      class=\"submit-all van-hairline--top\"\n      :price=\"total * 100\"\n      button-text=\"结算\"\n      @submit=\"onSubmit\"\n    >\n      <van-checkbox @click=\"allCheck\" v-model:checked=\"checkAll\">全选</van-checkbox>\n    </van-submit-bar>\n    <div class=\"empty\" v-if=\"!list.length\">\n      <img class=\"empty-cart\" src=\"https://s.yezgea02.com/1604028375097/empty-car.png\" alt=\"空购物车\">\n      <div class=\"title\">购物车空空如也</div>\n      <van-button round color=\"#1baeae\" type=\"primary\" @click=\"goTo\" block>前往选购</van-button>\n    </div>\n    <nav-bar></nav-bar>\n  </div>\n</template>\n\n<script>\nimport { reactive, onMounted, computed, toRefs } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { Toast } from 'vant'\nimport navBar from '@/components/NavBar'\nimport sHeader from '@/components/SimpleHeader'\nimport { getCart, deleteCartItem, modifyCart } from '@/service/cart'\n\nexport default {\n  components: {\n    navBar,\n    sHeader\n  },\n  setup() {\n    const router = useRouter()\n    const store = useStore()\n    const state = reactive({\n      checked: false,\n      list: [],\n      all: false,\n      result: [],\n      checkAll: true\n    })\n\n    onMounted(() => {\n      init()\n    })\n\n    const init = async () => {\n      Toast.loading({ message: '加载中...', forbidClick: true });\n      const { data } = await getCart({ pageNumber: 1 })\n      state.list = data\n      state.result = data.map(item => item.cartItemId)\n      Toast.clear()\n    }\n\n    const total = computed(() => {\n      let sum = 0\n      let _list = state.list.filter(item => state.result.includes(item.cartItemId))\n      _list.forEach(item => {\n        sum += item.goodsCount * item.sellingPrice\n      })\n      return sum\n    })\n\n    const goBack = () => {\n      router.go(-1)\n    }\n\n    const goTo = () => {\n      router.push({ path: '/home' })\n    }\n\n    const onChange = async (value, detail) => {\n      if (value > 5) {\n        Toast.fail('超出单个商品的最大购买数量')\n        return\n      }\n      if (value < 1) {\n        Toast.fail('商品不得小于0')\n        return\n      }\n      if (state.list.filter(item => item.cartItemId == detail.name)[0].goodsCount == value) return\n      Toast.loading({ message: '修改中...', forbidClick: true });\n      const params = {\n        cartItemId: detail.name,\n        goodsCount: value\n      }\n      await modifyCart(params)\n      state.list.forEach(item => {\n        if (item.cartItemId == detail.name) {\n          item.goodsCount = value\n        }\n      })\n      Toast.clear();\n    }\n\n    const onSubmit = async () => {\n      if (state.result.length == 0) {\n        Toast.fail('请选择商品进行结算')\n        return\n      }\n      const params = JSON.stringify(state.result)\n      router.push({ path: '/create-order', query: { cartItemIds: params } })\n    }\n\n    const deleteGood = async (id) => {\n      await deleteCartItem(id)\n      store.dispatch('updateCart')\n      init()\n    }\n\n    const groupChange = (result) => {\n      console.log(1)\n      if (result.length == state.list.length) {\n        console.log(2)\n        state.checkAll = true\n      } else {\n        console.log(3)\n        state.checkAll = false\n      }\n      state.result = result\n    }\n    \n    const allCheck = () => {\n      if (!state.checkAll) {\n        state.result = state.list.map(item => item.cartItemId)\n      } else {\n        state.result = []\n      }\n    }\n\n    \n\n    return {\n      ...toRefs(state),\n      total,\n      goBack,\n      goTo,\n      onChange,\n      onSubmit,\n      deleteGood,\n      groupChange,\n      allCheck\n    }\n  }\n}\n</script>\n\n<style lang=\"less\">\n  @import '../common/style/mixin';\n  .cart-box {\n    .cart-header {\n      position: fixed;\n      top: 0;\n      left: 0;\n      z-index: 10000;\n      .fj();\n      .wh(100%, 44px);\n      line-height: 44px;\n      padding: 0 10px;\n      .boxSizing();\n      color: #252525;\n      background: #fff;\n      border-bottom: 1px solid #dcdcdc;\n      .cart-name {\n        font-size: 14px;\n      }\n    }\n    .cart-body {\n      margin: 16px 0 100px 0;\n      padding-left: 10px;\n      .good-item {\n        display: flex;\n        .good-img {\n          img {\n            .wh(100px, 100px)\n          }\n        }\n        .good-desc {\n          display: flex;\n          flex-direction: column;\n          justify-content: space-between;\n          flex: 1;\n          padding: 20px;\n          .good-title {\n            display: flex;\n            justify-content: space-between;\n          }\n          .good-btn {\n            display: flex;\n            justify-content: space-between;\n            .price {\n              font-size: 16px;\n              color: red;\n              line-height: 28px;\n            }\n            .van-icon-delete {\n              font-size: 20px;\n              margin-top: 4px;\n            }\n          }\n        }\n      }\n      .delete-button {\n        width: 50px;\n        height: 100%;\n      }\n    }\n    .empty {\n      width: 50%;\n      margin: 0 auto;\n      text-align: center;\n      margin-top: 200px;\n      .empty-cart {\n        width: 150px;\n        margin-bottom: 20px;\n      }\n      .van-icon-smile-o {\n        font-size: 50px;\n      }\n      .title {\n        font-size: 16px;\n        margin-bottom: 20px;\n      }\n    }\n    .submit-all {\n      margin-bottom: 50px;\n      .van-checkbox {\n        margin-left: 10px\n      }\n      .van-submit-bar__text {\n        margin-right: 10px\n      }\n      .van-submit-bar__button {\n        background: @primary;\n      }\n    }\n    .van-checkbox__icon--checked .van-icon {\n      background-color: @primary;\n      border-color: @primary;\n    }\n  }\n</style>\n","import { render } from \"./Cart.vue?vue&type=template&id=2cc4f451&bindings={\\\"total\\\":\\\"setup\\\",\\\"goBack\\\":\\\"setup\\\",\\\"goTo\\\":\\\"setup\\\",\\\"onChange\\\":\\\"setup\\\",\\\"onSubmit\\\":\\\"setup\\\",\\\"deleteGood\\\":\\\"setup\\\",\\\"groupChange\\\":\\\"setup\\\",\\\"allCheck\\\":\\\"setup\\\"}\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport \"./Cart.vue?vue&type=style&index=0&lang=less\"\nscript.render = render\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $includes = require('../internals/array-includes').includes;\nvar addToUnscopables = require('../internals/add-to-unscopables');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar USES_TO_LENGTH = arrayMethodUsesToLength('indexOf', { ACCESSORS: true, 1: 0 });\n\n// `Array.prototype.includes` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.includes\n$({ target: 'Array', proto: true, forced: !USES_TO_LENGTH }, {\n  includes: function includes(el /* , fromIndex = 0 */) {\n    return $includes(this, el, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n\n// https://tc39.github.io/ecma262/#sec-array.prototype-@@unscopables\naddToUnscopables('includes');\n","<!--\n * 严肃声明：\n * 开源版本请务必保留此注释头信息，若删除我方将保留所有法律责任追究！\n * 本系统已申请软件著作权，受国家版权局知识产权以及国家计算机软件著作权保护！\n * 可正常分享和学习源码，不得用于违法犯罪活动，违者必究！\n * Copyright (c) 2020 陈尼克 all rights reserved.\n * 版权所有，侵权必究！\n *\n-->\n\n<template>\n  <div class=\"nav-bar van-hairline--top\">\n    <ul class=\"nav-list\">\n      <router-link  class=\"nav-list-item active\" to=\"home\">\n        <i class=\"nbicon nblvsefenkaicankaoxianban-1\"></i>\n        <span>首页</span>\n      </router-link>\n      <router-link  class=\"nav-list-item\" to=\"category\">\n        <i class=\"nbicon nbfenlei\"></i>\n        <span>分类</span>\n      </router-link>\n      <router-link  class=\"nav-list-item\" to=\"cart\">\n        <van-icon  name=\"shopping-cart-o\" :badge=\"!count ? '' : count\" />\n        <span>购物车</span>\n      </router-link>\n      <router-link  class=\"nav-list-item\" to=\"user\">\n        <i class=\"nbicon nblvsefenkaicankaoxianban-\"></i>\n        <span>我的</span>\n      </router-link>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { onMounted, computed } from 'vue'\nimport { useRoute } from 'vue-router'\nimport { useStore } from 'vuex'\nimport { getLocal } from '@/common/js/utils'\nexport default {\n  setup() {\n    const route = useRoute()\n    const store = useStore()\n    onMounted(() => {\n      const token = getLocal('token')\n      const path = route.path\n      if (token && !['/home', '/category'].includes(path)) {\n        store.dispatch('updateCart')\n      }\n    })\n    const count = computed(() => {\n      return store.state.cartCount\n    })\n\n    return {\n      count\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped >\n    @import '../common/style/mixin';\n    .nav-bar{\n      position: fixed;\n      left: 0;\n      bottom: 0;\n      width: 100%;\n      padding: 5px 0;\n      z-index: 1000;\n      background: #fff;\n      transform: translateZ(0);\n      -webkit-transform: translateZ(0);\n      .nav-list {\n        width: 100%;\n        .fj();\n        flex-direction: row;\n        padding: 0;\n        .nav-list-item {\n          display: flex;\n          flex: 1;\n          flex-direction: column;\n          text-align: center;\n          color: #666;\n          &.router-link-active {\n            color: @primary;\n          }\n          i {\n            text-align: center;\n            font-size: 22px;\n          }\n          span{\n            font-size: 12px;\n          }\n          .van-icon-shopping-cart-o {\n            margin: 0 auto;\n            margin-bottom: 2px;\n          }\n        }\n      }\n    }\n</style>\n","import { render } from \"./NavBar.vue?vue&type=template&id=ce4468ce&scoped=true&bindings={\\\"count\\\":\\\"setup\\\"}\"\nimport script from \"./NavBar.vue?vue&type=script&lang=js\"\nexport * from \"./NavBar.vue?vue&type=script&lang=js\"\n\nimport \"./NavBar.vue?vue&type=style&index=0&id=ce4468ce&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-ce4468ce\"\n\nexport default script","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar arrayMethodUsesToLength = require('../internals/array-method-uses-to-length');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n// FF49- issue\nvar USES_TO_LENGTH = arrayMethodUsesToLength('map');\n\n// `Array.prototype.map` method\n// https://tc39.github.io/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT || !USES_TO_LENGTH }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n","export { default } from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Cart.vue?vue&type=style&index=0&lang=less\"; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Cart.vue?vue&type=style&index=0&lang=less\""],"sourceRoot":""}